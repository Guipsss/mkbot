(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),l=a.n(c),o=(a(81),a(20)),s=a(132),u=a(4),i=a.n(u),m=a(8),p=a(30),f=a(7),h=a(57),d=a.n(h),b=function(){return window.history.replaceState({},document.title,window.location.pathname)},E=r.a.createContext(),v=function(){return Object(n.useContext)(E)},g=function(e){var t=e.component,a=e.path,c=Object(p.a)(e,["component","path"]),l=v(),s=l.isAuthenticated,u=l.loginWithRedirect;Object(n.useEffect)(function(){!function(){var e=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=3;break}return e.next=3,u({appState:{targetUrl:a}});case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[s,u,a]);return r.a.createElement(o.a,Object.assign({path:a,render:function(e){return!0===s?r.a.createElement(t,e):null}},c))},j=a(59),O=a.n(j),k=function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("img",{src:O.a,alt:"Loading"}))},w=a(13),y=a(14),x=a(129),S=a(130),C=a(131),N=a(133),T=a(134),P=a(135),A=a(136),R=a(61),_=a(159),B=a(137),z=a(138),M=a(139),W=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],c=t[1],l=v(),o=l.user,u=l.isAuthenticated,i=l.loginWithRedirect,m=l.logout,p=function(){return m({returnTo:window.location.origin})},h=o?o["http://a.mrkeebs.com/roles"]:[],d=[{name:"Artisans",path:"/artisans",active:function(e,t){return t.pathname.startsWith("/artisans")||t.pathname.startsWith("/catalogs")}},{name:"My Artisans",path:"/my-artisans",auth:!0},{name:"Wishlist",path:"/wishlist",auth:!0},{name:"Submit",path:"/submit",auth:!0},{name:"Review",path:"/review",role:"reviewer"},{name:"Bot",path:"/bot"}].filter(function(e){return e.role?h.indexOf(e.role)>-1:!e.hasOwnProperty("auth")||!0===e.auth&&u||!1===e.auth&&!u}).map(function(e){var t=!1!==e.exact;return r.a.createElement(x.a,{key:"nv_".concat(e.name)},r.a.createElement(S.a,{tag:w.a,to:e.path,exact:t,isActive:e.active,activeClassName:"router-link-".concat(!1===t?"":"exact-","active")},e.name))});return r.a.createElement("div",{className:"nav-container"},r.a.createElement(C.a,{color:"light",light:!0,expand:"md"},r.a.createElement(s.a,null,r.a.createElement(N.a,{className:"logo"}),r.a.createElement(T.a,{onClick:function(){return c(!a)}}),r.a.createElement(P.a,{isOpen:a,navbar:!0},r.a.createElement(A.a,{className:"mr-auto",navbar:!0},d),r.a.createElement(A.a,{className:"d-none d-md-block",navbar:!0},!u&&r.a.createElement(x.a,null,r.a.createElement(R.a,{id:"qsLoginBtn",color:"primary",className:"btn-margin",onClick:function(){return i({})}},"Log in")),u&&r.a.createElement(_.a,{nav:!0,inNavbar:!0},r.a.createElement(B.a,{nav:!0,caret:!0,id:"profileDropDown"},r.a.createElement("img",{src:o.picture,alt:"Profile",className:"nav-user-profile rounded-circle",width:"50"})),r.a.createElement(z.a,null,r.a.createElement(M.a,{header:!0},o.name),r.a.createElement(M.a,{tag:w.a,to:"/profile",className:"dropdown-profile",activeClassName:"router-link-exact-active"},r.a.createElement(y.a,{icon:"user",className:"mr-3"})," Profile"),r.a.createElement(M.a,{id:"qsLogoutBtn",onClick:function(){return p()}},r.a.createElement(y.a,{icon:"power-off",className:"mr-3"})," Log out")))),!u&&r.a.createElement(A.a,{className:"d-md-none",navbar:!0},r.a.createElement(x.a,null,r.a.createElement(R.a,{id:"qsLoginBtn",color:"primary",block:!0,onClick:function(){return i({})}},"Log in"))),u&&r.a.createElement(A.a,{className:"d-md-none justify-content-between",navbar:!0,style:{minHeight:170}},r.a.createElement(x.a,null,r.a.createElement("span",{className:"user-info"},r.a.createElement("img",{src:o.picture,alt:"Profile",className:"nav-user-profile d-inline-block rounded-circle mr-3",width:"50"}),r.a.createElement("h6",{className:"d-inline-block"},o.name))),r.a.createElement(x.a,null,r.a.createElement(y.a,{icon:"user",className:"mr-3"}),r.a.createElement(w.a,{to:"/profile",activeClassName:"router-link-exact-active"},"Profile")),r.a.createElement(x.a,null,r.a.createElement(y.a,{icon:"power-off",className:"mr-3"}),r.a.createElement(w.a,{to:"#",id:"qsLogoutBtn",onClick:function(){return p()}},"Log out")))))))},D=function(){return r.a.createElement("footer",{className:"bg-light p-3 text-center"},r.a.createElement("div",{className:"logo"}),r.a.createElement("p",null,"Brought to you by ",r.a.createElement("a",{href:"https://mrkeebs.com"},"MrKeebs"),". Fork me on ",r.a.createElement("a",{href:"https://github.com/misterkeebs/mkbot"},"GitHub"),"."))},I=a(16),L=Object(I.a)(),F=a(31),U=a.n(F),X=a(160),q=function(e){var t=Object(n.useState)(!0),a=Object(f.a)(t,2),c=a[0],l=a[1];return r.a.createElement(X.a,{color:e.type||"info",isOpen:c,toggle:function(){l(!1),e.onDismiss&&l(e.onDismiss())}},e.message)},K=function(e){var t=Object(o.g)(),a=Object(o.f)(),n=U.a.parse(window.location.search).msg;return n?r.a.createElement(q,{color:"info",message:n,onDismiss:function(){t.search="",a.push(t)}}):null},J=Object(o.i)(function(e){return e.history.push("/artisans"),r.a.createElement("div",null,"Home")}),H=a(64),G=a.n(H),Y=a(65),Q=a.n(Y),V=function(){return r.a.createElement("div",{className:"text-center hero my-3"},r.a.createElement("img",{className:"mb-3 app-logo",src:G.a,alt:"React logo",width:"120"}),r.a.createElement("h1",{className:"mb-4"},"MKBot Artisan Discord Bot"),r.a.createElement("p",null,r.a.createElement("img",{src:Q.a,width:"400",alt:"demo"})),r.a.createElement("p",{className:"lead"},"Manage and share your artisan collection and the ones you're looking for using a community driven database. All in one place!"))},$=a(66),Z=a(67),ee=a(74),te=a(68),ae=a(75),ne=a(140),re=a(141),ce=[{title:"Search",link:"https://auth0.com/docs/connections",description:"Search for an artisan using its maker, collection, sculpt or colorway."},{title:"Community driven database",link:"https://auth0.com/docs/multifactor-authentication",description:"Any user can submit a new entry by dragging a picture of the artisan into Discord and providing with the metadata."},{title:"Community driven curation process",link:"https://auth0.com/docs/anomaly-detection",description:"Assign reviewers that can check the content of each user submission and take action by amending, approving or rejecting."},{title:"Wishlist Matching",link:"https://auth0.com/docs/rules",description:"Allows users to mark artisans for sale and match users that are actively using for them."}],le=function(e){function t(){return Object($.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"next-steps my-5"},r.a.createElement("h2",{className:"my-5 text-center"},"Features"),r.a.createElement(ne.a,{className:"d-flex justify-content-between"},ce.map(function(e,t){return r.a.createElement(re.a,{key:t,md:5,className:"mb-4"},r.a.createElement("h6",{className:"mb-3"},r.a.createElement("a",{href:e.link},r.a.createElement(y.a,{icon:"link",className:"mr-2"}),e.title)),r.a.createElement("p",null,e.description))})))}}]),t}(n.Component),oe=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(V,null),r.a.createElement("hr",null),r.a.createElement(le,null))},se=a(152),ue=a(153),ie=a(154),me=a(69),pe=a(33),fe=a.n(pe),he=a(142),de=function(e){return r.a.createElement("div",null,r.a.createElement(he.a,Object.assign({color:"primary"},e)))},be=a(73),Ee=a(149),ve=a(150),ge=a(151),je=a(143),Oe=a(144),ke=a(145),we=a(146),ye=a(147),xe=a(148),Se=a(21);var Ce=function(e){var t=Object(n.useState)(!1),a=Object(f.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(f.a)(o,2),u=s[0],i=s[1],m=e.artisan,p=e.onRemove,h=e.onAdd,d=e.processing,b=v().isAuthenticated,E=d&&r.a.createElement(je.a,{className:"processing"},r.a.createElement(de,null)),g=function(e){return function(){h&&h(e,m)}},j=h&&c&&r.a.createElement(je.a,{style:{display:c?"block":"none"}},r.a.createElement(y.a,{icon:Se.e,color:"black",onClick:g("list")})," \xa0",r.a.createElement(y.a,{icon:Se.c,color:"black",onClick:g("wishlist")})),O=p&&(u&&r.a.createElement(je.a,{style:{display:u?"block":"none"}},r.a.createElement(y.a,{icon:Se.g,color:"black",onClick:function(){i(!1)}})," \xa0",r.a.createElement(y.a,{icon:Se.a,color:"black",onClick:function(){p&&p(m),l(!1),i(!1)}}))||c&&r.a.createElement(je.a,{style:{display:c?"block":"none"}},r.a.createElement(y.a,{icon:Se.h,color:"black",onClick:function(e){return i(!0)}})));return r.a.createElement(re.a,{key:m.artisan_id,onMouseEnter:function(e){return l(!0)},onMouseLeave:function(e){l(!1),i(!1)}},r.a.createElement(Oe.a,{className:"mkb-artisan-card"},r.a.createElement(ke.a,{top:!0,width:"20%",src:m.image,alt:m.sculpt}),E,b&&j,b&&O,r.a.createElement(we.a,null,r.a.createElement(ye.a,null,r.a.createElement("b",null,function(e){var t=e.colorway?" ".concat(e.colorway):"";return"".concat(e.sculpt).concat(t)}(m)," ")),r.a.createElement(xe.a,null,m.maker))))},Ne=function(){var e=Object(m.a)(i.a.mark(function e(t,a,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("addArtisan",t,a,n),e.next=3,fetch("/api/lists/".concat(a,"/").concat(n),{method:"PUT",headers:{Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),Te=function(e){var t=e.artisans,a=e.searchTerm,c=e.onRemove,l=e.page,o=e.pages,u=e.onPageChange,p=v().getTokenSilently,h=Object(n.useState)(null),d=Object(f.a)(h,2),b=d[0],E=d[1];if(a&&t&&!t.length)return r.a.createElement(s.a,null,r.a.createElement(ne.a,null,r.a.createElement(re.a,null,"No matches for ",r.a.createElement("b",null,a))));var g=function(e){return u&&u(e)},j=l&&parseInt(l,10),O=o&&parseInt(o,10),k=t.length,w=e.perRow||3,y=w-k%w;if(y<w)for(var x=0;x<y;x++)t.push(null);var S=function(){var e=Object(m.a)(i.a.mark(function e(t,a){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("add",t,a),e.next=3,p();case 3:return n=e.sent,E(a.artisan_id),e.next=7,Ne(n,t,a.artisan_id);case 7:E(null);case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),C=o&&O>1&&r.a.createElement(ne.a,null,r.a.createElement(re.a,{className:"mkb-pagination"},r.a.createElement(Ee.a,{"aria-label":"Artisans navigation"},r.a.createElement(ve.a,{disabled:1===j},r.a.createElement(ge.a,{first:!0,href:"#",onClick:function(e){return g(1)}})),r.a.createElement(ve.a,null,r.a.createElement(ve.a,{disabled:1===j},r.a.createElement(ge.a,{previous:!0,href:"#",onClick:function(e){return g(j-1)}}))),Array.apply(void 0,Object(be.a)(Array(O))).map(function(e,t){return r.a.createElement(ve.a,{active:t+1===j,key:t},r.a.createElement(ge.a,{href:"#",onClick:function(e){return g(t+1)}},t+1))}),r.a.createElement(ve.a,{disabled:j===O},r.a.createElement(ge.a,{next:!0,href:"#",onClick:function(e){return g(j+1)}})),r.a.createElement(ve.a,{disabled:j===O},r.a.createElement(ge.a,{last:!0,href:"#",onClick:function(e){return g(O)}})))));return r.a.createElement(s.a,null,C,r.a.createElement(ne.a,null,t.map(function(e,t){return e?r.a.createElement(Ce,{key:e.artisan_id,onRemove:c,onAdd:S,artisan:e,processing:e.artisan_id===b}):r.a.createElement(re.a,{key:t})})),C)},Pe=function(){var e=Object(m.a)(i.a.mark(function e(t){var a,n,r,c,l=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:1,e.next=3,fetch("/api/artisans/?q=".concat(t,"&page=").concat(a));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,c=n.headers,e.abrupt("return",{artisans:r,page:c.get("X-Pagination-Page"),pages:c.get("X-Pagination-TotalPages"),pageSize:c.get("X-Pagination-PerPage")});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(m.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/makers");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(f.a)(l,2),u=o[0],p=o[1],h=Object(n.useState)(1),d=Object(f.a)(h,2),b=d[0],E=d[1],v=Object(n.useState)(null),g=Object(f.a)(v,2),j=g[0],O=g[1],k=Object(n.useState)(!1),y=Object(f.a)(k,2),x=y[0],S=y[1],C=Object(n.useState)([]),N=Object(f.a)(C,2),T=N[0],P=N[1],A=Object(me.a)(a,500),R=function(){var e=Object(m.a)(i.a.mark(function e(t,a){var n,r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(A,a);case 2:n=e.sent,r=n.artisans,c=n.pages,p(r),E(a),O(c),S(!1);case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){S(!0),Ae().then(function(e){P(e),A?Pe(A,b).then(function(e){var t=e.artisans,a=e.pages;p(t),E(b),O(a),S(!1)}):(p([]),S(!1))})},[A,b]);var _=x?r.a.createElement(de,null):A?r.a.createElement(Te,{artisans:u,searchTerm:A,pages:j,page:b,perRow:4,onPageChange:function(e){R(A,e)}}):r.a.createElement("div",null),B=A&&u&&u.length?r.a.createElement(ne.a,null,r.a.createElement(re.a,null,"Showing ",r.a.createElement("b",null,u.length)," matches for ",r.a.createElement("b",null,A))):null,z=!A&&r.a.createElement(s.a,{className:"mkb-makers"},T.map(function(e){return r.a.createElement(ne.a,{key:e.maker_id},r.a.createElement(re.a,null,r.a.createElement(w.a,{to:"/catalogs/".concat(e.maker_id,"-").concat(fe()(e.name))},e.name)))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(ne.a,null,r.a.createElement(re.a,null,r.a.createElement(se.a,null,r.a.createElement(ue.a,{for:"exampleSearch"},"Search"),r.a.createElement(ie.a,{type:"search",name:"search",id:"exampleSearch",placeholder:"search maker, sculpt and/or colorway",autoComplete:"off",onChange:function(e){return c(e.target.value)}})))),B),z,_)},_e=function(){var e=Object(m.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/makers");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(n.useState)(!0),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(f.a)(l,2),u=o[0],i=o[1];if(Object(n.useEffect)(function(){c(!0),_e().then(function(e){c(!1),i(e)})},[]),a)return r.a.createElement(de,null);return r.a.createElement(s.a,{className:"mkb-makers"},u.map(function(e){return r.a.createElement(ne.a,{key:e.maker_id},r.a.createElement(re.a,null,r.a.createElement(w.a,{to:"/catalogs/".concat(e.maker_id,"-").concat(fe()(e.name))},e.name)))}))},ze=a(155),Me=function(){var e=Object(m.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/makers/".concat(t,"/sculpts"));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(m.a)(i.a.mark(function e(t,a){var n,r,c,l,o=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:1,e.next=3,fetch("/api/makers/".concat(t,"/artisans?sculpt=").concat(a,"&page=").concat(n));case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,l=r.headers,e.abrupt("return",{artisans:c,page:l.get("X-Pagination-Page"),pages:l.get("X-Pagination-TotalPages"),pageSize:l.get("X-Pagination-PerPage")});case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),De=function(){var e=Object(o.f)(),t=Object(o.h)(),a=t.slug,c=t.sculpt,l=Object(n.useState)(!0),u=Object(f.a)(l,2),p=u[0],h=u[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),E=b[0],v=b[1],g=Object(n.useState)([]),j=Object(f.a)(g,2),O=j[0],k=j[1],w=Object(n.useState)(c),y=Object(f.a)(w,2),C=y[0],N=y[1],T=Object(n.useState)([]),P=Object(f.a)(T,2),R=P[0],_=P[1],B=Object(n.useState)(null),z=Object(f.a)(B,2),M=z[0],W=z[1],D=Object(n.useState)(null),I=Object(f.a)(D,2),L=I[0],F=I[1],U=Object(n.useState)(null),X=Object(f.a)(U,2),q=X[0],K=X[1],J=a.split("-")[0];Object(n.useEffect)(function(){C&&H(C),(!C||O.length<1)&&(h(!0),Me(J).then(function(e){k(e),h(!1)}))},[J,C]);var H=function(){var e=Object(m.a)(i.a.mark(function e(t){var a,n,r,c,l,o=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:1,v(!0),e.next=4,We(J,t,a);case 4:n=e.sent,r=n.artisans,c=n.pages,l=n.pageSize,console.log("artisans",{artisans:r,page:a,pages:c}),N(t),_(r),W(a),F(c),K(l),v(!1);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),G=p?r.a.createElement(de,null):r.a.createElement(A.a,{vertical:!0},O.map(function(t){return r.a.createElement(x.a,{key:t.sculpt},r.a.createElement(S.a,{href:"/catalogs/".concat(a,"/").concat(t.sculpt),onClick:(n=t,function(t){if(!function(e){if(e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1===e.button)return!0;e.stopPropagation(),e.preventDefault()}(t))return e.push("/catalogs/".concat(a,"/").concat(n.sculpt)),N(n.sculpt),!1})},t.sculpt," ",r.a.createElement(ze.a,{color:"info",pill:!0},t.count)));var n})),Y=E?r.a.createElement(de,null):r.a.createElement(Te,{artisans:R,pages:L,page:M,pageSize:q,onPageChange:function(e){H(C,e)}});return r.a.createElement(s.a,null,r.a.createElement(ne.a,null,r.a.createElement(re.a,{xs:"2"},G),r.a.createElement(re.a,{xs:"10"},Y)))},Ie=function(){var e=Object(m.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,fetch("/api/user",{headers:{Authorization:"Bearer ".concat(a)}});case 5:return n=e.sent,e.abrupt("return",n.json());case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Le=Object(o.i)(function(e){var t=v().getTokenSilently,a=Object(n.useState)(),c=Object(f.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(!0),u=Object(f.a)(s,2),i=u[0],m=u[1],p=U.a.parse(window.location.search).msg;if(Object(n.useEffect)(function(){Ie(t).then(function(e){o(e),m(!1)})},[t]),i)return r.a.createElement(de,null);var h="In order to get started you need to link you Discord account";l.discord_user_id&&(h="You're all set");var d=p&&r.a.createElement(q,{message:p,onDismiss:function(){var t=e.location,a=e.history;t.search="",a.push(t)}});return r.a.createElement(r.a.Fragment,null,d,r.a.createElement("div",null,h))}),Fe=a(156),Ue=a(71),Xe=a.n(Ue),qe=function(){var e=Object(m.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/makers?order=name");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=v().getTokenSilently,t=Object(n.useState)(!1),a=Object(f.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),u=Object(f.a)(o,2),p=u[0],h=u[1],d=Object(n.useState)(null),b=Object(f.a)(d,2),E=b[0],g=b[1],j=Object(n.useState)([]),O=Object(f.a)(j,2),k=O[0],w=O[1],y=Object(n.useState)(null),x=Object(f.a)(y,2),S=x[0],C=x[1],N=Object(n.useState)(null),T=Object(f.a)(N,2),P=T[0],A=T[1],_=Object(n.useState)(null),B=Object(f.a)(_,2),z=B[0],M=B[1],W=Object(n.useState)(null),D=Object(f.a)(W,2),I=D[0],L=D[1],F=Object(n.useState)(!1),U=Object(f.a)(F,2),X=U[0],K=U[1],J=Object(n.useState)(null),H=Object(f.a)(J,2),G=H[0],Y=H[1],Q=function(){var e=Object(m.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l(!0),(a=new FileReader).onloadend=Object(m.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe();case 2:(t=e.sent).unshift({}),t.push({maker_id:"new",name:"New maker..."}),w(t),l(!1),g(a.result);case 8:case"end":return e.stop()}},e)})),a.readAsDataURL(t.target.files[0]),h(t.target.files[0]);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),V=!p&&r.a.createElement(re.a,null,r.a.createElement(se.a,{className:"mkb-files"},r.a.createElement(ue.a,{for:"image"},"To start the submission process, select or drag the artisan image to the box below:"),r.a.createElement(ie.a,{type:"file",name:"file",id:"image",onChange:Q})));if(c)return r.a.createElement(de,null);var $=function(){var t=Object(m.a)(i.a.mark(function t(){var a,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return K(!0),t.next=3,e();case 3:return a=t.sent,(n=new FormData).append("maker",P||S),n.append("sculpt",z),n.append("colorway",I),n.append("image",p),t.next=11,Xe.a.put("/api/submissions",n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(a)}});case 11:K(!1),h(null),Y("Thanks for your submission! We'll notify you when it gets processed.");case 14:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),Z=G&&r.a.createElement(q,{color:"success",message:G}),ee=!(S&&z&&I),te=p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{className:"mkb-file-preview",xs:6},r.a.createElement("img",{src:E,alt:"Preview"})),r.a.createElement(re.a,{xs:6},r.a.createElement(Fe.a,null,r.a.createElement(se.a,null,r.a.createElement(ue.a,{for:"maker"},"Maker"),r.a.createElement(ie.a,{type:"select",name:"maker",id:"maker",disabled:X,onChange:function(e){return C(e.target.value)}},k.map(function(e,t){return r.a.createElement("option",{key:t},e.name)}))),S&&"New maker..."===S&&r.a.createElement(se.a,null,r.a.createElement(ue.a,{for:"newMaker"},"Maker"),r.a.createElement(ie.a,{type:"text",name:"newMaker",id:"newMaker",disabled:X,onChange:function(e){return A(e.target.value)}})),r.a.createElement(se.a,null,r.a.createElement(ue.a,{for:"sculpt"},"Sculpt"),r.a.createElement(ie.a,{type:"text",name:"sculpt",id:"sculpt",disabled:X,onChange:function(e){return M(e.target.value)}})),r.a.createElement(se.a,null,r.a.createElement(ue.a,{for:"colorway"},"Colorway"),r.a.createElement(ie.a,{type:"text",name:"colorway",id:"colorway",disabled:X,onChange:function(e){return L(e.target.value)}}))),r.a.createElement(s.a,{className:"nopadding"},r.a.createElement(ne.a,{noGutters:!0},r.a.createElement(re.a,null,r.a.createElement(R.a,{color:"primary",disabled:X||ee,onClick:$},"Submit")),r.a.createElement(re.a,null,X&&r.a.createElement(de,null))))));return r.a.createElement(r.a.Fragment,null,Z,r.a.createElement(s.a,null,r.a.createElement(ne.a,null,V,te)))},Je=function(){var e=Object(m.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,fetch("/api/user",{headers:{Authorization:"Bearer ".concat(a)}});case 5:return n=e.sent,e.abrupt("return",n.json());case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(m.a)(i.a.mark(function e(t,a){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.next=5,fetch("/api/user",{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return r=e.sent,e.abrupt("return",r.json());case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),Ge=function(){var e=v(),t=e.loading,a=e.getTokenSilently,c=e.user,l=Object(n.useState)(!0),o=Object(f.a)(l,2),s=o[0],u=o[1],p=Object(n.useState)(null),h=Object(f.a)(p,2),d=h[0],b=h[1],E=Object(n.useState)(null),g=Object(f.a)(E,2),j=g[0],O=g[1],w=Object(n.useState)(null),y=Object(f.a)(w,2),x=y[0],S=y[1],C=Object(n.useState)(null),N=Object(f.a)(C,2),T=N[0],P=N[1],A=Object(n.useState)(!1),_=Object(f.a)(A,2),B=_[0],z=_[1];if(Object(n.useState)(function(){Je(a).then(function(e){b(e),u(!1)})},[a]),t||!c)return r.a.createElement(k,null);if(s||!d)return r.a.createElement(de,null);j||O(d.name||c.name),x||S(d.nickname||c.nickname);var M=function(){var e=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.name=j,d.nickname=x,z(!0),e.prev=3,e.next=6,He(a,d);case 6:P({message:"Profile saved.",type:"info"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),P({message:"Error saving the profile: ".concat(e.t0),type:"danger"});case 12:return e.prev=12,z(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[3,9,12,15]])}));return function(){return e.apply(this,arguments)}}(),W=T?r.a.createElement(q,Object.assign({},T,{onDismiss:function(e){return P(null),!0}})):null;return r.a.createElement(Fe.a,null,W,r.a.createElement(se.a,null,r.a.createElement(ue.a,{for:"name"},"Name"),r.a.createElement(ie.a,{type:"text",name:"name",id:"name",value:j,disabled:B,onChange:function(e){return O(e.target.value)}})),r.a.createElement(se.a,null,r.a.createElement(ue.a,{for:"nickname"},"Nickname"),r.a.createElement(ie.a,{type:"text",name:"nickname",id:"nickname",value:x,disabled:B,onChange:function(e){return S(e.target.value)}})),r.a.createElement(R.a,{onClick:M,disabled:B},B?r.a.createElement("div",null,r.a.createElement(de,{size:"sm"})):"Save"))},Ye=a(157),Qe=a(158),Ve=a(34),$e=a.n(Ve),Ze=function(){var e=Object(m.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,fetch("/api/submissions",{headers:{Authorization:"Bearer ".concat(a)}});case 5:return n=e.sent,e.abrupt("return",n.json());case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(m.a)(i.a.mark(function e(t,a,n){var r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,fetch("/api/submissions/".concat(n,"/").concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(r)}});case 5:return c=e.sent,e.abrupt("return",c.json());case 7:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),tt=function(){var e=v().getTokenSilently,t=Object(n.useState)(!0),a=Object(f.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),s=Object(f.a)(o,2),u=s[0],p=s[1];if(Object(n.useState)(function(){Ze(e).then(function(e){p(e),l(!1)})}),c)return r.a.createElement(de,null);var h=function(){var t=Object(m.a)(i.a.mark(function t(a,n){var r,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,et(e,a,n.submission_id);case 2:r=$e.a.clone(u),c=r.indexOf(n),r.splice(c,1),p(r);case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),d=function(e){return function(){var t=Object(m.a)(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",h("approve",e));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(m.a)(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",h("reject",e));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()};return r.a.createElement(Ye.a,null,r.a.createElement("tbody",null,u.map(function(e){return r.a.createElement("tr",{key:e.submission_id},r.a.createElement("td",{width:"120px"},r.a.createElement("img",{src:e.image,alt:"preview",width:"100px"})),r.a.createElement("td",null,r.a.createElement("b",null,"Maker:")," ",e.maker,r.a.createElement("br",null),r.a.createElement("b",null,"Sculpt:")," ",e.sculpt,r.a.createElement("br",null),r.a.createElement("b",null,"Colorway:")," ",e.colorway,r.a.createElement("br",null)),r.a.createElement("td",null,e.nickname||e.user),r.a.createElement("td",null,e.created_at),r.a.createElement("td",{align:"right"},r.a.createElement(Qe.a,null,r.a.createElement(R.a,{color:"primary",onClick:d(e)},"Approve"),r.a.createElement(R.a,{color:"primary",onClick:b(e)},"Reject"))))})))},at=a(72),nt=function(){var e=Object(m.a)(i.a.mark(function e(t,a){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.next=5,fetch("/api/user/".concat(a),{headers:{Authorization:"Bearer ".concat(n)}});case 5:return r=e.sent,e.abrupt("return",r.json());case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),rt=function(){var e=Object(m.a)(i.a.mark(function e(t,a){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/".concat(t,"/").concat(a));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),ct=function(){var e=Object(m.a)(i.a.mark(function e(t,a,n){var r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,fetch("/api/user/".concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({public:n})});case 5:return c=e.sent,e.abrupt("return",c.json());case 7:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),lt=function(){var e=Object(m.a)(i.a.mark(function e(t,a,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/lists/".concat(a,"/").concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),ot=function(e){var t,a,c=e.listType,l=e.userId,u=Object(o.f)(),p=v(),h=!1;console.log("userId",l),l||(h=p.loading,t=p.user,a=p.getTokenSilently);var d=Object(n.useState)(!0),b=Object(f.a)(d,2),E=b[0],g=b[1],j=Object(n.useState)([]),O=Object(f.a)(j,2),w=O[0],x=O[1],S=Object(n.useState)(null),C=Object(f.a)(S,2),N=C[0],T=C[1],P=Object(n.useState)(null),A=Object(f.a)(P,2),R=A[0],_=A[1],B=Object(n.useState)(!1),z=Object(f.a)(B,2),M=z[0],W=z[1],D=Object(n.useState)(!1),I=Object(f.a)(D,2),L=I[0],F=I[1],U=Object(n.useState)(null),X=Object(f.a)(U,2),q=X[0],K=X[1];if(Object(n.useEffect)(function(){var e=[l?rt(l,c):nt(a,c)];console.log(" *** userId",l),l?e.push(Promise.resolve()):e.push(Je(a)),Promise.all(e).then(function(e){var t=Object(f.a)(e,2),a=t[0],n=a.list,r=a.artisans,c=t[1];console.log("list, artisans",n,r),l&&!n&&u.push("/artisans?msg=List+not+found"),T(n),x(r),K(c),g(!1)})},[a,c,l,u]),h||!t&&!l)return r.a.createElement(k,null);var J=function(){var e=Object(m.a)(i.a.mark(function e(t){var n,r,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _(t.artisan_id),e.next=3,a();case 3:return n=e.sent,e.next=6,lt(n,c,t.artisan_id);case 6:r=w.indexOf(t),(l=$e.a.clone(w)).splice(r,1),x(l),_(null);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();if(E)return r.a.createElement(de,null);if(!w)return r.a.createElement("div",null,"No Artisans");var H=function(){var e=Object(m.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),t=!N.public,e.next=4,ct(a,c,t);case 4:n=e.sent,T(n),W(!1);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),G=t&&(q.nickname||t.nickname),Y=t&&"".concat(N.url_prefix,"/").concat(N.user_id,"-").concat(G,"/").concat(c),Q=null;t&&(Q=M?r.a.createElement(de,{size:"sm"}):N.public?r.a.createElement(at.CopyToClipboard,{text:Y,onCopy:function(){F(!0),setTimeout(function(){return F(!1)},800)}},r.a.createElement("div",null,"This artisan list is currently public at ",r.a.createElement("a",{href:Y},Y)," ",r.a.createElement(y.a,{icon:Se.b,color:"#ccc"}),r.a.createElement("span",{className:"mkb-list-action-copied"},L&&" copied!"))):r.a.createElement("div",null,"This artisan list is currently private."));var V=N.public?"Make Private":"Make Public",$=t&&r.a.createElement(ne.a,{className:"mkb-list"},r.a.createElement(re.a,{xs:8},Q),r.a.createElement(re.a,{xs:4,className:"mkb-list-action"},M?V:r.a.createElement("a",{href:"#noop",onClick:H,disabled:M},V)));return r.a.createElement(s.a,null,$,r.a.createElement(ne.a,null,r.a.createElement(re.a,null,r.a.createElement(Te,{artisans:w,onRemove:J,processing:R,perRow:e.perRow}))))},st=function(){return r.a.createElement(ot,{listType:"list",perRow:4})},ut=function(){var e=Object(o.h)(),t=e.slug,a=e.listType;console.log("slug, listType",t,a);var n=t.split("-")[0];return r.a.createElement(ot,{listType:a,userId:n})},it=(a(127),a(27));var mt=function(){return r.a.createElement(ot,{listType:"wishlist",perRow:4})};(function(){it.b.add(Se.d),it.b.add(Se.i),it.b.add(Se.f)})();var pt=function(){var e=v(),t=e.loading,a=e.user;if(t)return r.a.createElement(k,null);var n=a?a["http://a.mrkeebs.com/roles"]:[];return r.a.createElement(o.b,{history:L},r.a.createElement("div",{id:"app",className:"d-flex flex-column h-100"},r.a.createElement(W,null),r.a.createElement(s.a,{className:"flex-grow-1 mt-5"},r.a.createElement(K,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",exact:!0,component:J}),r.a.createElement(o.a,{path:"/bot",exact:!0,component:oe}),r.a.createElement(o.a,{path:"/artisans",exact:!0,component:Re}),r.a.createElement(o.a,{path:"/catalogs/:slug/:sculpt?",component:De}),r.a.createElement(o.a,{path:"/catalogs",component:Be}),r.a.createElement(g,{path:"/dashboard",exact:!0,component:Le}),r.a.createElement(g,{path:"/submit",exact:!0,component:Ke}),r.a.createElement(g,{path:"/my-artisans",exact:!0,component:st}),r.a.createElement(g,{path:"/wishlist",exact:!0,component:mt}),r.a.createElement(g,{path:"/profile",component:Ge}),n.includes("reviewer")&&r.a.createElement(g,{path:"/review",component:tt}),r.a.createElement(o.a,{path:"/u/:slug/:listType",component:ut}))),r.a.createElement(D,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ft=a(35);l.a.render(r.a.createElement(function(e){var t=e.children,a=e.onRedirectCallback,c=void 0===a?b:a,l=Object(p.a)(e,["children","onRedirectCallback"]),o=Object(n.useState)(),s=Object(f.a)(o,2),u=s[0],h=s[1],v=Object(n.useState)(),g=Object(f.a)(v,2),j=g[0],O=g[1],k=Object(n.useState)(),w=Object(f.a)(k,2),y=w[0],x=w[1],S=Object(n.useState)(!0),C=Object(f.a)(S,2),N=C[0],T=C[1],P=Object(n.useState)(!1),A=Object(f.a)(P,2),R=A[0],_=A[1];Object(n.useEffect)(function(){!function(){var e=Object(m.a)(i.a.mark(function e(){var t,a,n,r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()(l);case 2:if(t=e.sent,x(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,c(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,h(r),!r){e.next=19;break}return e.next=17,t.getUser();case 17:o=e.sent,O(o);case 19:T(!1);case 20:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]);var B=function(){var e=Object(m.a)(i.a.mark(function e(){var t,a,n=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},_(!0),e.prev=2,e.next=5,y.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,_(!1),e.finish(10);case 13:return e.next=15,y.getUser();case 15:a=e.sent,O(a),h(!0);case 18:case"end":return e.stop()}},e,null,[[2,7,10,13]])}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(m.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,y.handleRedirectCallback();case 3:return e.next=5,y.getUser();case 5:t=e.sent,T(!1),h(!0),O(t);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(E.Provider,{value:{isAuthenticated:u,user:j,loading:N,popupOpen:R,loginWithPopup:B,handleRedirectCallback:z,getIdTokenClaims:function(){return y.getIdTokenClaims.apply(y,arguments)},loginWithRedirect:function(){return y.loginWithRedirect.apply(y,arguments)},getTokenSilently:function(){return y.getTokenSilently.apply(y,arguments)},getTokenWithPopup:function(){return y.getTokenWithPopup.apply(y,arguments)},logout:function(){return y.logout.apply(y,arguments)}}},t)},{domain:ft.domain,client_id:ft.clientId,audience:ft.audience,redirect_uri:window.location.origin,onRedirectCallback:function(e){L.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},35:function(e){e.exports={domain:"mrkeebs.auth0.com",clientId:"IAkI2XQ14Vno3SuFceBovm2pT8cpY2Xo",audience:"http://fcoury.pagekite.me/"}},59:function(e,t,a){e.exports=a.p+"static/media/loading.c5590569.svg"},64:function(e,t,a){e.exports=a.p+"static/media/logo.fe45065c.png"},65:function(e,t,a){e.exports=a.p+"static/media/demo.c9996a1b.gif"},76:function(e,t,a){e.exports=a(128)},81:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.9fe478c8.chunk.js.map